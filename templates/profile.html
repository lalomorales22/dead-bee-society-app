{% extends "base.html" %}

{% block content %}
    <div class="profile-container">
        <h1>{{ user.username }}'s Profile</h1>
        {% if user.avatar %}
            <img src="{{ user.avatar }}" alt="{{ user.username }}'s avatar" class="profile-avatar">
        {% endif %}
        {% if user.bio %}
            <p class="profile-bio">{{ user.bio }}</p>
        {% endif %}
        
        {% if user == current_user %}
            <h2>Edit Profile</h2>
            <form method="POST" action="{{ url_for('profile', username=user.username) }}">
                {{ form.hidden_tag() }}
                <div>
                    {{ form.avatar.label }}
                    {{ form.avatar(class="form-control") }}
                </div>
                <div>
                    {{ form.bio.label }}
                    {{ form.bio(class="form-control") }}
                </div>
                {{ form.submit(class="btn btn-primary") }}
            </form>
        {% endif %}

        <h2>{{ user.username }}'s Posts</h2>
        {% for post in posts %}
            <div class="post">
                <p>{{ post.content }}</p>
                <img src="{{ post.image_url }}" alt="Dead Bee Image" class="post-image">
                <small>Posted on {{ post.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</small>
            </div>
        {% endfor %}
    </div>
{% endblock %}
